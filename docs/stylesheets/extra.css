/* Site-wide overrides (Zensical / Material theme)
 * - Commit Mono everywhere
 * - Slightly smaller type
 * - Grayscale UI (background stays white)
 * - Remove default "book" logo icon
 */

:root {
  /* Zensical/Material uses CSS variables for font selection */
  --md-text-font: "Commit Mono";
  --md-code-font: "Commit Mono";
}

/* Typography sizing */
/*
 * The modern theme ships with a very small base for prose. With Commit Mono it
 * ends up feeling tiny, so bump the main sizes back up.
 */
.md-typeset {
  font-size: 0.65rem!important;
  line-height: 1.65;
}

.md-typeset code {
  font-size: 1em;
}

.md-nav {
  font-size: 0.65rem;
}

/* Grayscale palette tweaks (light mode) */
[data-md-color-scheme="default"] {
  --md-default-bg-color: #fff;
  --md-default-fg-color: rgba(28, 27, 26, 0.92);
  --md-default-fg-color--light: rgba(28, 27, 26, 0.65);
  --md-default-fg-color--lighter: rgba(28, 27, 26, 0.40);
  --md-default-fg-color--lightest: rgba(28, 27, 26, 0.10);

  /* Links / interactive elements */
  --md-primary-fg-color: rgba(28, 27, 26, 0.86);
  --md-accent-fg-color: rgba(28, 27, 26, 0.92);
  --md-accent-fg-color--transparent: rgba(28, 27, 26, 0.10);

  /* Main link color (body text links) */
  --md-typeset-a-color: rgba(28, 27, 26, 0.78);

  /* Subtle surfaces */
  --md-code-bg-color: rgb(245, 245, 245);
  --md-typeset-table-color: rgba(28, 27, 26, 0.12);
}

/* Dark mode: keep grayscale accents (avoid default blue links)
 *
 * The underlying theme sets link colors for:
 *   [data-md-color-scheme=slate][data-md-color-primary=grey]
 * which has higher specificity than a plain [data-md-color-scheme=slate] rule.
 */
[data-md-color-scheme="slate"][data-md-color-primary="grey"][data-md-color-accent="grey"] {
  /* Links */
  --md-typeset-a-color: rgba(230, 230, 230, 0.85);

  /* Primary/accent UI */
  --md-primary-fg-color: rgba(230, 230, 230, 0.85);
  --md-accent-fg-color: rgba(255, 255, 255, 0.9);
  --md-accent-fg-color--transparent: rgba(255, 255, 255, 0.12);
}

/* Make links feel more "document"-like */
.md-typeset a {
  color: var(--md-typeset-a-color, var(--md-accent-fg-color));
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, currentColor 25%, transparent);
  text-underline-offset: 0.12em;
}

.md-typeset a:hover {
  color: var(--md-accent-fg-color);
  text-decoration-color: color-mix(in srgb, currentColor 55%, transparent);
}

/* Sidebar link colors (work in light + dark mode) */
.md-nav__link {
  color: var(--md-default-fg-color--light);
}

.md-nav__link:hover,
.md-nav__link--active {
  color: var(--md-default-fg-color);
}

/* Remove the default top-left book icon */
.md-header__button.md-logo,
.md-nav__button.md-logo,
.md-nav__title .md-logo {
}

/* Make the header site name look like text, but behave like a link */
header.md-header .md-header__topic > a.md-ellipsis {
  color: inherit;
  text-decoration: none;
  cursor: pointer;
}

header.md-header .md-header__topic > a.md-ellipsis:hover {
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, currentColor 35%, transparent);
  text-underline-offset: 0.12em;
}

/* Tables: make them more compact and reduce visual chrome
 *
 * Material's default table styling uses generous padding and a full border box.
 * For config/API reference tables this is space-inefficient, so we tighten
 * padding, remove the left/right outer borders, and encourage the first columns
 * to shrink.
 */
.md-typeset__table {
  /* Horizontal padding inside cells */
  --gondolin-table-pad-x: 0.4rem;

  display: block;
  width: 100%;

  /* The theme uses a scroll wrapper that already bleeds into the gutter.
   * Keep the wrapper padded like the rest of the content, and only “bleed” the
   * table itself by the cell padding.
   */
  margin: 0;
  padding: 0 0.8rem;
}

.md-typeset table:not([class]) {
  width: 100%;
  min-width: 100%;

  /* Slightly denser than body text, but keep readability */
  font-size: 0.62rem;
  line-height: 1.45;

  /* Remove the default “boxed” look */
  border: 0;
  border-top: 0.05rem solid var(--md-typeset-table-color);
  border-bottom: 0.05rem solid var(--md-typeset-table-color);
  border-radius: 0;
  box-shadow: none;
}

.md-typeset table:not([class]) th,
.md-typeset table:not([class]) td {
  padding: 0.35em var(--gondolin-table-pad-x);
  vertical-align: top;
}

/* Keep the header a touch roomier */
.md-typeset table:not([class]) thead th {
  padding-top: 0.45em;
  padding-bottom: 0.45em;
}

/* Encourage “Field” to take minimal width */
.md-typeset table:not([class]) th:nth-child(1),
.md-typeset table:not([class]) td:nth-child(1) {
  width: 1%;
  white-space: nowrap;
}

/* Keep “Type” narrow but allow wrapping (avoid forcing huge columns) */
.md-typeset table:not([class]) th:nth-child(2),
.md-typeset table:not([class]) td:nth-child(2) {
  width: 1%;
  white-space: normal;
  overflow-wrap: anywhere;
}

/* Let the description wrap naturally */
.md-typeset__table > table:not([class]) {
  margin: 0 calc(-1 * var(--gondolin-table-pad-x));
  width: calc(100% + (var(--gondolin-table-pad-x) * 2));
  min-width: calc(100% + (var(--gondolin-table-pad-x) * 2));
}

.md-typeset table:not([class]) th:nth-child(n + 3),
.md-typeset table:not([class]) td:nth-child(n + 3) {
  overflow-wrap: anywhere;
}

/* Code blocks: match the table treatment
 *
 * Material gives code blocks a large horizontal padding which makes them feel
 * overly indented compared to prose. We "bleed" the block background slightly
 * into the gutter so the code content aligns with surrounding text.
 */
.md-typeset .highlight {
  --gondolin-code-pad-x: 0.6rem;
}

.md-typeset .highlight > pre {
  margin-left: calc(-1 * var(--gondolin-code-pad-x));
  margin-right: calc(-1 * var(--gondolin-code-pad-x));
}

.md-typeset .highlight > pre > code {
  padding-left: var(--gondolin-code-pad-x);
  padding-right: var(--gondolin-code-pad-x);
}
